# –§–∞–∑—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (5-7)

## üé® –§–∞–∑–∞ 5: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ù–µ–¥–µ–ª—è 6-9)

### 5.1 HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (2-3 –¥–Ω—è)
**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–Ω—É—é —Ä–∞–∑–º–µ—Ç–∫—É —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø—É

**–û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**
- Header —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º Concert A
- –°–µ–ª–µ–∫—Ç–æ—Ä —Ä–µ–∂–∏–º–æ–≤ (–≠—Ç–∞–ª–æ–Ω/–¢—é–Ω–µ—Ä/–ê–≤—Ç–æ)
- –ß–∞—Å—Ç–æ—Ç–æ–º–µ—Ä —Å –∞–Ω–∞–ª–æ–≥–æ–≤–æ–π —à–∫–∞–ª–æ–π
- 6 –∫–Ω–æ–ø–æ–∫ —Å—Ç—Ä—É–Ω —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ö–æ–Ω—Ç—Ä–æ–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å—Ç–æ–ø)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Concert A (—Å–ª–∞–π–¥–µ—Ä + –∏–Ω–ø—É—Ç)
- –°—Ç–∞—Ç—É—Å –±–∞—Ä —Å —É—Ä–æ–≤–Ω–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ HTML:**
- ‚úÖ –°–µ–º–∞–Ω—Ç–∏—á–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ ARIA –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ—Ç–æ—Ç–∏–ø—É –Ω–∞ 100%
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏ JavaScript

### 5.2 CSS —Å—Ç–∏–ª–∏ (4-5 –¥–Ω–µ–π)
**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å glassmorphism —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

**–î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞:**
- **–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞**: –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã #667eea ‚Üí #764ba2
- **–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞**: System fonts (-apple-system, BlinkMacSystemFont)
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: Glassmorphism (backdrop-filter: blur())
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã 0.3s ease
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: Mobile-first –ø–æ–¥—Ö–æ–¥

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã CSS:**
```css
/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.tuner-container {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    /* Glassmorphism —ç—Ñ—Ñ–µ–∫—Ç */
}

/* –ß–∞—Å—Ç–æ—Ç–æ–º–µ—Ä */
.frequency-meter {
    background: linear-gradient(90deg, 
        #f56565 0%, #ed8936 25%, 
        #48bb78 45%, #48bb78 55%, 
        #ed8936 75%, #f56565 100%);
}

/* –ö–Ω–æ–ø–∫–∏ —Å—Ç—Ä—É–Ω */
.string-btn {
    transition: all 0.3s ease;
    min-height: 44px; /* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
}

.string-btn.playing {
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}
```

**–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–æ—á–∫–∏:**
- Mobile: 320px - 768px
- Tablet: 768px - 1024px  
- Desktop: 1024px+

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ CSS:**
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–∑–∞–π–Ω—É –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –Ω–∞ 95%
- ‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã ‚â•44px –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –±–µ–∑ —Å–Ω–∏–∂–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Glassmorphism —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 5.3 UIController –º–æ–¥—É–ª—å (3-4 –¥–Ω—è)
**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ UIController:**
```javascript
class UIController {
    constructor(tunerLogic, concertAManager, eventEmitter) {
        this.tunerLogic = tunerLogic;
        this.concertAManager = concertAManager;
        this.eventEmitter = eventEmitter;
        this.elements = this.initializeElements();
        this.bindEvents();
    }

    initializeElements() {
        // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        return {
            meterNeedle: document.getElementById('meterNeedle'),
            centDisplay: document.getElementById('centDisplay'),
            frequencyDisplay: document.getElementById('frequencyDisplay'),
            stringButtons: document.querySelectorAll('.string-btn'),
            modeButtons: document.querySelectorAll('.mode-btn'),
            concertASlider: document.getElementById('concertASlider'),
            concertAInput: document.getElementById('concertAInput'),
            concertAValue: document.getElementById('concertAValue'),
            levelBars: document.querySelectorAll('.level-bar'),
            statusMessage: document.getElementById('statusMessage')
        };
    }

    updateFrequencyMeter(deviation) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–π —à–∫–∞–ª—ã
        // deviation –≤ —Ü–µ–Ω—Ç–∞—Ö: -50¬¢ –¥–æ +50¬¢
        const maxDeviation = 50;
        const normalizedDeviation = Math.max(-1, Math.min(1, deviation / maxDeviation));
        const rotation = normalizedDeviation * 45; // ¬±45 –≥—Ä–∞–¥—É—Å–æ–≤
        
        this.elements.meterNeedle.style.transform = 
            `translateX(-50%) rotate(${rotation}deg)`;
            
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
        this.elements.centDisplay.textContent = 
            `${deviation > 0 ? '+' : ''}${deviation.toFixed(1)}¬¢`;
            
        // –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
        this.updateTuningColors(deviation);
    }

    updateStringButtons(activeString, playingString = null) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ —Å—Ç—Ä—É–Ω
        this.elements.stringButtons.forEach((btn, index) => {
            btn.classList.remove('active', 'playing');
            
            if (index === playingString) {
                btn.classList.add('playing');
            } else if (index === activeString) {
                btn.classList.add('active');
            }
        });
    }

    updateConcertADisplay(value) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ Concert A
        this.elements.concertAValue.textContent = `A = ${value.toFixed(1)}Hz`;
        this.elements.concertASlider.value = value;
        this.elements.concertAInput.value = value.toFixed(1);
    }

    updateInputLevel(level) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —É—Ä–æ–≤–Ω—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
        // level –≤ dB –æ—Ç -Infinity –¥–æ 0
        const normalizedLevel = Math.max(0, Math.min(1, (level + 60) / 60));
        const activeBars = Math.floor(normalizedLevel * 8);
        
        this.elements.levelBars.forEach((bar, index) => {
            bar.classList.toggle('active', index < activeBars);
        });
        
        document.getElementById('levelValue').textContent = 
            level === -Infinity ? '-‚àûdB' : `${level.toFixed(0)}dB`;
    }

    showError(message) {
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        const errorModal = document.getElementById('errorModal');
        const errorMessage = document.getElementById('errorMessage');
        
        errorMessage.textContent = message;
        errorModal.style.display = 'block';
        errorModal.setAttribute('aria-hidden', 'false');
    }
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ UIController:**
- ‚úÖ –í—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞–≤–Ω–æ (60 FPS)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ

---

## üß™ –§–∞–∑–∞ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ù–µ–¥–µ–ª—è 8-11)

### 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π (3-4 –¥–Ω—è)
**–¶–µ–ª—å**: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ –º–æ–¥—É–ª–∏ –≤ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É

**–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (app.js):**
```javascript
// src/js/app.js
import EventEmitter from './modules/EventEmitter.js';
import AudioEngine from './modules/AudioEngine.js';
import FrequencyAnalyzer from './modules/FrequencyAnalyzer.js';
import ConcertAManager from './modules/ConcertAManager.js';
import TunerLogic from './modules/TunerLogic.js';
import UIController from './modules/UIController.js';
import StorageManager from './modules/StorageManager.js';

class SimpleTuner {
    constructor() {
        this.eventEmitter = new EventEmitter();
        this.storageManager = new StorageManager();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
        this.audioEngine = new AudioEngine(this.eventEmitter);
        this.frequencyAnalyzer = new FrequencyAnalyzer(this.audioEngine, this.eventEmitter);
        this.concertAManager = new ConcertAManager(this.eventEmitter, this.storageManager);
        this.tunerLogic = new TunerLogic(
            this.audioEngine, 
            this.frequencyAnalyzer, 
            this.concertAManager,
            this.eventEmitter
        );
        this.uiController = new UIController(
            this.tunerLogic, 
            this.concertAManager, 
            this.eventEmitter
        );
        
        this.isRunning = false;
        this.animationFrameId = null;
    }

    async initialize() {
        try {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ –¥–≤–∏–∂–∫–∞
            await this.audioEngine.initialize();
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Concert A
            this.concertAManager.loadFromStorage();
            
            // –ó–∞–ø—É—Å–∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
            await this.audioEngine.startMicrophone();
            
            // –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
            this.bindEvents();
            
            // –ó–∞–ø—É—Å–∫ –≥–ª–∞–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
            this.startAnalysisLoop();
            
            console.log('Simple Tuner –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ');
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
            this.uiController.showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ');
        }
    }

    bindEvents() {
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –º–æ–¥—É–ª–µ–π
        this.eventEmitter.on('frequency-detected', (data) => {
            this.handleFrequencyDetected(data);
        });
        
        this.eventEmitter.on('concert-a-changed', (value) => {
            this.uiController.updateConcertADisplay(value);
        });
        
        this.eventEmitter.on('mode-changed', (mode) => {
            this.handleModeChanged(mode);
        });
        
        this.eventEmitter.on('error-occurred', (error) => {
            this.uiController.showError(error.message);
        });
    }

    startAnalysisLoop() {
        if (this.isRunning) return;
        
        this.isRunning = true;
        
        const analyze = () => {
            if (!this.isRunning) return;
            
            // –ê–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã
            const frequency = this.frequencyAnalyzer.analyzeFrequency();
            if (frequency) {
                this.eventEmitter.emit('frequency-detected', { frequency });
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
            const inputLevel = this.audioEngine.getInputLevel();
            this.uiController.updateInputLevel(inputLevel);
            
            // –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–∞–¥—Ä–∞ (20 FPS)
            this.animationFrameId = setTimeout(() => {
                requestAnimationFrame(analyze);
            }, 50);
        };
        
        requestAnimationFrame(analyze);
    }

    handleFrequencyDetected(data) {
        // –ü–µ—Ä–µ–¥–∞—á–∞ —á–∞—Å—Ç–æ—Ç—ã –≤ –ª–æ–≥–∏–∫—É —Ç—é–Ω–µ—Ä–∞
        this.tunerLogic.handleFrequencyDetected(data.frequency);
    }

    handleModeChanged(mode) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞
        console.log(`–†–µ–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: ${mode}`);
    }

    stop() {
        this.isRunning = false;
        if (this.animationFrameId) {
            clearTimeout(this.animationFrameId);
        }
        this.audioEngine.stopAll();
    }
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', async () => {
    const tuner = new SimpleTuner();
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('beforeunload', () => {
        tuner.stop();
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    await tuner.initialize();
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —É—Å–ø–µ—à–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç —Å –∑–∞–¥–∞–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π (20 FPS)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 6.2 –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (4-5 –¥–Ω–µ–π)
**–¶–µ–ª—å**: –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–Æ–Ω–∏—Ç —Ç–µ—Å—Ç—ã (tests/unit/):**
```javascript
// tests/unit/FrequencyAnalyzer.test.js
import FrequencyAnalyzer from '../../src/js/modules/FrequencyAnalyzer.js';

describe('FrequencyAnalyzer', () => {
    let analyzer;
    let mockAudioEngine;

    beforeEach(() => {
        mockAudioEngine = {
            getAnalyser: jest.fn()
        };
        analyzer = new FrequencyAnalyzer(mockAudioEngine);
    });

    test('should detect 440Hz with ¬±0.5¬¢ accuracy', () => {
        // –ú–æ–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è 440Hz
        const mockAnalyser = {
            getFloatFrequencyData: jest.fn((array) => {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–∏–∫–∞ –Ω–∞ 440Hz
                const bin440 = Math.floor(440 * 8192 / 44100);
                array[bin440] = -20; // -20dB –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ 440Hz
            })
        };
        
        mockAudioEngine.getAnalyser.mockReturnValue(mockAnalyser);
        
        const frequency = analyzer.analyzeFrequency();
        expect(frequency).toBeCloseTo(440, 1);
    });

    test('should filter harmonics correctly', () => {
        // –¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–∞—Ä–º–æ–Ω–∏–∫
    });

    test('should return null for invalid input', () => {
        mockAudioEngine.getAnalyser.mockReturnValue(null);
        const frequency = analyzer.analyzeFrequency();
        expect(frequency).toBeNull();
    });
});

// tests/unit/ConcertAManager.test.js
import ConcertAManager from '../../src/js/modules/ConcertAManager.js';

describe('ConcertAManager', () => {
    let manager;
    let mockEventEmitter;
    let mockStorageManager;

    beforeEach(() => {
        mockEventEmitter = { emit: jest.fn() };
        mockStorageManager = { 
            save: jest.fn(), 
            load: jest.fn().mockReturnValue(440.0) 
        };
        manager = new ConcertAManager(mockEventEmitter, mockStorageManager);
    });

    test('should calculate string frequencies correctly', () => {
        manager.setConcertA(440.0);
        
        // E4 (1-—è —Å—Ç—Ä—É–Ω–∞) = A4 * 2^(19/12) ‚âà 329.63Hz
        const e4Frequency = manager.calculateStringFrequency(0);
        expect(e4Frequency).toBeCloseTo(329.63, 1);
        
        // A2 (5-—è —Å—Ç—Ä—É–Ω–∞) = A4 * 2^(-12/12) = A4 / 2 = 220Hz  
        const a2Frequency = manager.calculateStringFrequency(4);
        expect(a2Frequency).toBeCloseTo(220.0, 1);
    });

    test('should validate input range', () => {
        expect(() => manager.setConcertA(434.9)).toThrow();
        expect(() => manager.setConcertA(445.1)).toThrow();
        expect(() => manager.setConcertA(440.0)).not.toThrow();
    });

    test('should emit events when concert A changes', () => {
        manager.setConcertA(442.0);
        expect(mockEventEmitter.emit).toHaveBeenCalledWith('concert-a-changed', 442.0);
    });
});
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (tests/integration/):**
```javascript
// tests/integration/audio-pipeline.test.js
describe('Audio Pipeline Integration', () => {
    test('should process audio from microphone to UI', async () => {
        // –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞:
        // –ú–∏–∫—Ä–æ—Ñ–æ–Ω ‚Üí AudioEngine ‚Üí FrequencyAnalyzer ‚Üí TunerLogic ‚Üí UIController
    });
    
    test('should handle concert A changes across modules', () => {
        // –¢–µ—Å—Ç propagation –∏–∑–º–µ–Ω–µ–Ω–∏–π Concert A —á–µ—Ä–µ–∑ –≤—Å–µ –º–æ–¥—É–ª–∏
    });
});
```

**E2E —Ç–µ—Å—Ç—ã (tests/e2e/):**
```javascript
// tests/e2e/tuning-flow.test.js
describe('Tuning Flow E2E', () => {
    test('should complete full tuning session', () => {
        // –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–∏—Ç–∞—Ä—ã
    });
    
    test('should work on mobile devices', () => {
        // –¢–µ—Å—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
    });
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ > 80%
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ E2E —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ CI/CD pipeline

### 6.3 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (2-3 –¥–Ω—è)
**–¶–µ–ª—å**: –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ó–∞–¥–∞—á–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é Chrome DevTools
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è FFT –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- [ ] –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è reflow –∏ repaint –≤ UI
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- [ ] –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞: < 80–º—Å
- [ ] –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI: 15-25 FPS —Å—Ç–∞–±–∏–ª—å–Ω–æ
- [ ] –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: < 50MB
- [ ] –í—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: < 3 —Å–µ–∫—É–Ω–¥

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:**
- ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

---

## üöÄ –§–∞–∑–∞ 7: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π (–ù–µ–¥–µ–ª—è 11-12)

### 7.1 PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (2-3 –¥–Ω—è)
**–¶–µ–ª—å**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ Progressive Web App

**Service Worker (service-worker.js):**
```javascript
const CACHE_NAME = 'simple-tuner-v2.1';
const urlsToCache = [
    '/',
    '/src/index.html',
    '/src/css/main.css',
    '/src/css/variables.css',
    '/src/css/components.css',
    '/src/css/responsive.css',
    '/src/js/app.js',
    '/src/js/modules/AudioEngine.js',
    '/src/js/modules/FrequencyAnalyzer.js',
    '/src/js/modules/ConcertAManager.js',
    '/src/js/modules/TunerLogic.js',
    '/src/js/modules/UIController.js',
    '/src/assets/icons/icon-192.png',
    '/src/assets/icons/icon-512.png'
];

// Cache First —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
self.addEventListener('install', (event) => {
    event.waitUntil(
        caches.open(CACHE_NAME)
            .then((cache) => cache.addAll(urlsToCache))
            .then(() => self.skipWaiting())
    );
});

self.addEventListener('fetch', (event) => {
    event.respondWith(
        caches.match(event.request)
            .then((response) => {
                // Cache hit - return response
                if (response) {
                    return response;
                }
                return fetch(event.request);
            })
    );
});

// –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫—ç—à–µ–π
self.addEventListener('activate', (event) => {
    event.waitUntil(
        caches.keys().then((cacheNames) => {
            return Promise.all(
                cacheNames.map((cacheName) => {
                    if (cacheName !== CACHE_NAME) {
                        return caches.delete(cacheName);
                    }
                })
            );
        })
    );
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ PWA:**
- ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ –∞—É–¥–∏—Ç—ã Lighthouse PWA
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –ò–∫–æ–Ω–∫–∏ –∏ splash screen –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 7.2 –§–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1-2 –¥–Ω—è)
**–¶–µ–ª—å**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

**–ó–∞–¥–∞—á–∏:**
- [ ] –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—Å–µ—Ö CSS –∏ JavaScript —Ñ–∞–π–ª–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (WebP, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã)
- [ ] Gzip/Brotli —Å–∂–∞—Ç–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è < 1.2MB

**–ò—Ç–æ–≥–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- [ ] Lighthouse –∞—É–¥–∏—Ç: Performance > 90, PWA = 100
- [ ] –í—Å–µ –±—Ä–∞—É–∑–µ—Ä—ã: Chrome 80+, Safari 13+, Firefox 75+, Edge 80+
- [ ] –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: iOS Safari, Chrome Mobile
- [ ] –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 7.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π (1 –¥–µ–Ω—å)
**–¶–µ–ª—å**: –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- [ ] README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- [ ] CHANGELOG.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é:**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- ‚úÖ PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

---

–≠—Ç–∏ —Ç—Ä–∏ —Ñ–∞–∑—ã –∑–∞–≤–µ—Ä—à–∞—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É Simple Tuner v2.1 —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é ¬±0.5¬¢ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.