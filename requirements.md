## 6. Критерии приемки

### 6.1 Функциональные критерии

**Базовая функциональность**:
- [ ] Все 6 кнопок струн воспроизводят правильные частоты (±0.05 Hz)
- [ ] Переключатель длительности работает корректно (2 сек / непрерывно)
- [ ] Кнопка остановки прерывает воспроизведение
- [ ] Разрешение на микрофон запрашивается при загрузке

**Concert A функциональность**:
- [ ] Concert A настройка работает в диапазоне 435.0-445.0Hz с шагом 0.1Hz
- [ ] Все эталонные частоты пересчитываются корректно по формуле
- [ ] Изменение Concert A сохраняется между сессиями в localStorage
- [ ] Кнопка сброса возвращает к стандартному 440.0Hz
- [ ] Slider и числовое поле ввода синхронизированы
- [ ] Валидация не позволяет ввод значений вне диапазона 435.0-445.0Hz
- [ ] Индикатор Concert A отображает текущее значение постоянно

**Анализ частот (повышенная точность)**:
- [ ] Тюнер определяет частоты с точностью ±0.5 цента
- [ ] Параболическая интерполяция работает стабильно
- [ ] Фильтрация гармоник выделяет основную частоту корректно
- [ ] Автоматическое определение ближайшей струны работает с учетом Concert A
- [ ] Ручной режим настройки показывает неограниченный диапазон отклонений
- [ ] Визуальная индикация отображает правильное направление настройки
- [ ] Стабилизация показаний через 5 последовательных измерений ±1¢

**Режимы работы**:
- [ ] Переключение "Эталон/Тюнер/Авто" работает без конфликтов
- [ ] Автоматическое переключение реагирует на звук за 500мс
- [ ] Возврат в режим ожидания через 10 сек тишины
- [ ] Ручной выбор струны подсвечивает правильную кнопку
- [ ] Изменение Concert A мгновенно обновляет показания в режиме Тюнер

**Обработка сигнала**:
- [ ] Сигнал ниже -40dB показывает "Слишком тихо"
- [ ] Перегрузка ≥0dB показывает предупреждение но анализ продолжается
- [ ] Фоновый шум не влияет на точность (выбор самой громкой частоты)
- [ ] Сглаживание по 5 измерениям обеспечивает стабильность
- [ ] Расширенный диапазон фильтрации 75-370Hz для всех значений Concert A

### 6.2 Технические критерии
- [ ] Время отклика тюнера < 80мс (улучшено с 100мс)
- [ ] Приложение загружается < 3 секунд
- [ ] Работает в Chrome 80+, Safari 13+, Firefox 75+, Edge 80+
- [ ] Функционирует без подключения к интернету
- [ ] Размер приложения < 1.2MB (увеличено с 1MB для новых функций)
- [ ] Обновление интерфейса 15-25 FPS (улучшено с 10-20 FPS)
- [ ] FFT 8192 семплов работает без задержек на целевых устройствах
- [ ] ConcertAManager API функционирует без ошибок
- [ ] Сохранение/загрузка настроек работает надежно

### 6.3 UX критерии
- [ ] Интерфейс интуитивно понятен без инструкций
- [ ] Все элементы удобны для касания на мобильных (≥44px)
- [ ] Дизайн выглядит современно и минималистично
- [ ] Отзывчивый дизайн работает на всех размерах экранов (320px-1920px)
- [ ] Цветовая индикация уровня сигнала работает корректно
- [ ] Плавные переходы между состояниями интерфейса
- [ ] Concert A настройки интегрированы естественно в интерфейс
- [ ] Анимации изменения Concert A не отвлекают от основных функций

### 6.4 Критерии точности
- [ ] Точность измерения ±0.5 цента подтверждена эталонными сигналами
- [ ] Concert A пересчет формул математически корректен
- [ ] Интерполяция спектра работает стабильно на всех целевых устройствах
- [ ] Фильтрация гармоник выделяет основную частоту в 95% случаев
- [ ] Временная корреляция обеспечивает стабильность ±1¢ за 5 измерений

### 6.5 Сценарии тестирования

**Позитивные сценарии**:
- Настройка каждой струны в автоматическом режиме
- Настройка в ручном режиме для сильно расстроенных струн
- Переключение между всеми режимами работы
- Изменение Concert A и проверка пересчета частот
- Использование на мобильном и десктоп устройствах
- Длительное использование с различными значениями Concert A

**Негативные сценарии**:
- Отказ в доступе к микрофону
- Отсутствие входного сигнала
- Очень тихий или очень громкий сигнал
- Фоновый шум и искажения
- Частоты вне диапазона гитарных струн
- Некорректные значения Concert A (вне диапазона 435-445Hz)
- Повреждение данных localStorage

**Граничные значения**:
- Тестирование на частотах ±100 центов от эталонов
- Минимальные и максимальные уровни сигнала
- Крайние значения Concert A (435.0 и 445.0Hz)
- Переключение режимов во время активного анализа
- Изменение Concert A во время активной настройки
- Долгое использование без перезагрузки страницы

## 7. Ограничения и допущения

### 7.1 Ограничения
- Только стандартный строй гитары (E-A-D-G-B-E)
- Работа только в браузерах с поддержкой Web Audio API
- Требует разрешение на доступ к микрофону
- Анализ только основной частоты (без гармоник)
- Concert A ограничен диапазоном 435-445Hz для совместимости с музыкальными стандартами
- Точность ±0.5¢ достижима только при оптимальных условиях записи
- Повышенные требования к производительности устройства (FFT 8192)

### 7.2 Допущения
- Пользователь имеет базовые знания настройки гитары
- Устройство имеет рабочий микрофон с приемлемым качеством
- Окружающий шум минимален при использовании тюнера
- Гитара находится в пределах ±100 центов от стандартного строя (для автоопределения)
- Пользователь понимает концепцию Concert A Reference и его влияние на настройку
- Браузер поддерживает localStorage для сохранения настроек
- Устройство имеет достаточную вычислительную мощность для FFT 8192

## 8. Риски и митигация

### 8.1 Технические риски

- **Проблема**: Задержка в Web Audio API при повышенной точности FFT 8192
- **Митигация**: Оптимизация алгоритмов, адаптивный размер буфера, тестирование на слабых устройствах

- **Проблема**: Сложность параболической интерполяции может снизить производительность
- **Митигация**: Профилирование кода, оптимизация математических операций, fallback к линейной интерполяции

- **Проблема**: Неточность алгоритма определения частот при переменном Concert A
- **Митигация**: Тщательная калибровка формул пересчета, тестирование с эталонными сигналами различных Concert A

- **Проблема**: Различия в поведении браузеров при обработке точных частот
- **Митигация**: Кроссбраузерное тестирование, полифиллы, нормализация Web Audio API

- **Проблема**: Влияние фонового шума на точность ±0.5 цента
- **Митигация**: Улучшенная фильтрация, адаптивные пороги, робастные алгоритмы выделения сигнала

- **Проблема**: Потеря данных Concert A настроек при сбоях localStorage
- **Митигация**: Резервное копирование, валидация данных, graceful fallback к 440.0Hz

### 8.2 UX риски

- **Проблема**: Сложность понимания Concert A Reference для обычных пользователей
- **Митигация**: Контекстные подсказки, значение по умолчанию 440.0Hz, опциональность настройки

- **Проблема**: Перегруженность интерфейса дополнительными настройками
- **Митигация**: Прогрессивное раскрытие функций, скрытие расширенных настроек, минималистичный дизайн

- **Проблема**: Неясность визуальной индикации при изменении Concert A
- **Митигация**: Четкие анимации обновления, цветовое кодирование, подтверждающие сообщения

- **Проблема**: Путаница при переключении между разными значениями Concert A
- **Митигация**: Постоянная индикация текущего значения, предупреждения при радикальных изменениях

---

**Версия документа**: 2.1  
**Дата обновления**: 18.06.2025  
**Авторы**: Системный аналитик, UX/UI дизайнер, Тестировщик  
**Изменения**: Добавлен настраиваемый Concert A Reference (435-445Hz), повышена точность до ±0.5 цента, улучшены алгоритмы анализа, расширены критерии приемки, добавлен новый модуль ConcertAManager  
**Статус**: Готов к разработке