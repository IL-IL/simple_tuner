# Simple Tuner - Техническое Задание

## 1. Обзор проекта

**Название**: Simple Tuner  
**Тип**: Веб-приложение для настройки гитары  
**Платформа**: Одностраничное веб-приложение (SPA)  
**Целевые устройства**: Десктоп (ноутбуки) и мобильные устройства (iPhone)  

## 2. Функциональные требования

### 2.1 Use Case 1: Воспроизведение эталонных частот

**Актор**: Пользователь  
**Предусловие**: Веб-страница загружена в браузере  
**Основной сценарий**:
1. Пользователь видит 6 кнопок, соответствующих струнам гитары (E4-B3-G3-D3-A2-E2)
2. Пользователь нажимает на кнопку нужной струны
3. Система воспроизводит эталонную частоту выбранной струны
4. Воспроизведение происходит согласно выбранному режиму (короткий/длинный сигнал)

**Альтернативные сценарии**:
- Пользователь может остановить воспроизведение досрочно кнопкой "стоп"
- Пользователь может переключить режим воспроизведения (2 секунды / непрерывно)

**Постусловие**: Звук воспроизведен, пользователь может настраивать струну

### 2.2 Use Case 2: Анализ звука с микрофона

**Актор**: Пользователь  
**Предусловие**: Разрешен доступ к микрофону  
**Основной сценарий**:
1. Пользователь извлекает звук на гитаре
2. Система захватывает аудио через микрофон
3. Система анализирует частоту и определяет ближайшую струну
4. Система отображает:
   - Какая струна настраивается
   - Отклонение в центах от эталонной частоты
   - Визуальную индикацию (подтянуть/ослабить)

**Альтернативные сценарии**:
- Если частота не распознана - показать "нет сигнала"
- Если сигнал слишком слабый - показать "увеличьте громкость"

**Постусловие**: Пользователь видит точную информацию о настройке струны

### 2.3 Use Case 3: Настройка режимов воспроизведения

**Актор**: Пользователь  
**Предусловие**: Интерфейс загружен  
**Основной сценарий**:
1. Пользователь видит переключатель режимов воспроизведения
2. Пользователь переключает между режимами:
   - Короткий сигнал (2 секунды)
   - Длинный сигнал (непрерывно)
3. Новый режим применяется ко всем кнопкам струн

**Постусловие**: Режим воспроизведения изменен

## 3. Технические требования

### 3.1 Архитектура
- **Тип**: Single Page Application (SPA)
- **Технологический стек**: HTML5, CSS3, JavaScript (ES6+), Web Audio API
- **Аудио**: Web Audio API для генерации тонов и анализа частот
- **Алгоритм анализа**: FFT (Fast Fourier Transform) для частотного анализа

### 3.2 Эталонные частоты струн
```
1-я струна (E4): 329.63 Hz
2-я струна (B3): 246.94 Hz  
3-я струна (G3): 196.00 Hz
4-я струна (D3): 146.83 Hz
5-я струна (A2): 110.00 Hz
6-я струна (E2): 82.41 Hz
```

### 3.3 Параметры анализа звука
- **Точность измерения**: ±1 цент
- **Частота обновления**: Минимум 10 раз в секунду
- **Анализируемый диапазон**: 80-350 Hz (покрывает все струны)
- **Тип анализа**: Основная частота (без гармоник)

### 3.4 Производительность
- **Отклик тюнера**: < 100мс
- **Время загрузки**: < 3 секунды
- **Размер файлов**: < 1MB общий размер

### 3.5 Совместимость
- **Браузеры**: Chrome 80+, Safari 13+, Firefox 75+, Edge 80+
- **Устройства**: Desktop, iPhone (iOS 13+)
- **Ориентация**: Portrait и Landscape
- **Разрешения**: 320px - 1920px ширина

## 4. UI/UX требования

### 4.1 Дизайн-концепция
- **Стиль**: Современный минимализм с элементами скевоморфизма
- **Цветовая схема**: Светлые тона
- **Вдохновение**: Музыкальные проигрыватели 90х в современной интерпретации
- **Принцип**: Интуитивно понятный интерфейс без инструкций

### 4.2 Компоненты интерфейса

#### 4.2.1 Кнопки струн
- **Количество**: 6 кнопок
- **Подписи**: E, B, G, D, A, E (с указанием октавы)
- **Размер**: Минимум 44px для мобильных устройств
- **Расположение**: Вертикально или горизонтально (адаптивно)
- **Состояния**: Обычное, нажатое, активное (воспроизводится)

#### 4.2.2 Индикатор настройки
- **Тип**: Аналоговая шкала + числовое значение в центах
- **Диапазон шкалы**: -50 до +50 центов
- **Визуальная индикация**:
  - Зеленая зона: ±5 центов (точная настройка)
  - Желтая зона: ±5-20 центов (близко)
  - Красная зона: >±20 центов (далеко)
- **Стрелка/указатель**: В стиле VU-метра
- **Числовое значение**: Крупно, четко видимо

#### 4.2.3 Элементы управления
- **Переключатель режима**: Короткий/длинный сигнал
  - Иконки: ♪ (короткий) / ♫ (длинный)
- **Кнопка остановки**: ⏹ или ✕
- **Индикатор текущей струны**: Подсветка активной струны

#### 4.2.4 Микрофон
- **Индикатор доступа**: Иконка микрофона с состоянием (активен/неактивен)
- **Уровень сигнала**: Простой индикатор громкости входящего звука

### 4.3 Адаптивность
- **Мобильные устройства**: Вертикальное расположение элементов
- **Десктоп**: Горизонтальное или смешанное расположение
- **Touch-friendly**: Все элементы удобны для касания пальцем

## 5. Техническая реализация

### 5.1 Рекомендуемая архитектура файлов
```
simple_tuner/
├── index.html
├── css/
│   └── styles.css
├── js/
│   ├── app.js
│   ├── audio-engine.js
│   ├── tuner.js
│   └── ui.js
└── assets/
    └── icons/
```

### 5.2 Ключевые модули
- **AudioEngine**: Web Audio API, генерация тонов
- **Tuner**: Анализ частот, алгоритм определения нот
- **UI**: Управление интерфейсом, отображение данных
- **App**: Координация всех модулей

### 5.3 Оффлайн поддержка
- **Service Worker**: Кэширование для работы без интернета
- **Manifest**: Web App Manifest для установки как PWA

## 6. Критерии приемки

### 6.1 Функциональные критерии
- [ ] Все 6 кнопок струн воспроизводят правильные частоты
- [ ] Переключатель режимов работает корректно
- [ ] Кнопка остановки прерывает воспроизведение
- [ ] Тюнер определяет частоты с точностью ±1 цент
- [ ] Визуальная индикация отображает правильное отклонение
- [ ] Приложение работает на мобильных и десктоп устройствах

### 6.2 Технические критерии
- [ ] Время отклика тюнера < 100мс
- [ ] Приложение загружается < 3 секунд
- [ ] Работает в современных браузерах
- [ ] Функционирует без подключения к интернету
- [ ] Размер приложения < 1MB

### 6.3 UX критерии
- [ ] Интерфейс интуитивно понятен без инструкций
- [ ] Все элементы удобны для касания на мобильных
- [ ] Дизайн выглядит современно и минималистично
- [ ] Отзывчивый дизайн работает на всех размерах экранов

## 7. Ограничения и допущения

### 7.1 Ограничения
- Только стандартный строй гитары (E-A-D-G-B-E)
- Работа только в браузерах с поддержкой Web Audio API
- Требует разрешение на доступ к микрофону

### 7.2 Допущения
- Пользователь имеет базовые знания настройки гитары
- Устройство имеет рабочий микрофон
- Окружающий шум минимален при использовании тюнера

## 8. Риски и митигация

### 8.1 Технические риски
- **Проблема**: Задержка в Web Audio API
- **Митигация**: Оптимизация буферов, тестирование на разных устройствах

- **Проблема**: Неточность алгоритма определения частот
- **Митигация**: Использование проверенных FFT библиотек, калибровка

- **Проблема**: Различия в поведении браузеров
- **Митигация**: Тщательное тестирование, полифиллы при необходимости

### 8.2 UX риски
- **Проблема**: Сложность интерфейса для новичков
- **Митигация**: Пользовательское тестирование, итеративные улучшения

---

**Версия документа**: 1.0  
**Дата создания**: 18.06.2025  
**Автор**: Системный аналитик  
**Статус**: Готов к разработке